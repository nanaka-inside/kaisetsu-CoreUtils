.. raw:: latex

   \begin{abstract} \newpage
   \hbox{}\newpage

はじめに
========

筆者まえがき
-------------

「情報というのは面白いもので、こちらから探しにいかないとないのと同じで、ゲームなどでも攻略に行き詰まったりして、ネットでWikiを調べてみたり、攻略本を探してようやく出てくるという性質でして、人間、必要に駆られないと、なかなか新しい情報を得ようとしない [#core-bukkyo]_ ものです。」 [#coreutils-monodesu]_

.. [#core-bukkyo] なかなか新しい情報を得ようとしない：新しい情報が得られる便利な仕組みはいくつもあるものの、そういうツールが増えれば増えるほど「自分にとって都合のよい新しい情報」しか目に入らなくなるのが人間の愛おしさである。
.. [#coreutils-monodesu] 蝉丸P (2012). 蝉丸Pのつれづれ仏教講座 株式会社エンターブレイン p.263


ごあいさつ
----------
筆者の@tboffice [#twitter-tboffice]_ と申します。この本は、GNU Coreutils [#coreutils-url]_ のマニュアル [#coreutils-manual]_ をひと通り眺めてみて、解説をしてみようというコンセプトの本に書かれた本です。
弊サークル・第7開発セクション [#dai7sec]_ が発行してきた同人誌「ななかInside PRESS」の2号と3号にまたがって掲載された「Coreutils大全」という連載を一冊の本にまとめました。

なぜ今、Coreutilsなのか。

Linuxのコンソールでお仕事をしていると、シェルスクリプトで楽をしようとします。
楽をするため、コマンドを調べていたところ、Coreutilsのマニュアルにたどり着きました。
気づけば、Coreutilsのマニュアルを読んで、コマンドの実行方法や、知らなかったコマンドや、いままで使ったことがないオプションを見つけていました。

.. [#twitter-tboffice] https://twitter.com/tboffice
.. [#dai7sec] https://sites.google.com/site/dai7sec/
.. [#coreutils-url] http://www.gnu.org/software/coreutils/
.. [#coreutils-manual] http://www.gnu.org/software/coreutils/manual/
.. [#core-sed] coreutilsに含まれないコマンド(sedとか)がばんばん出てくるしどうしてこうなった

たとえば、

* 「 ``cat`` をたんどくでじっこうしたら どうなるです？」
* 「ふぁいるを ``pr | pr`` したらどうなるです？」「べとべとです？」
* 「 ``tail -f`` と ``tailf`` はどこがちがうです？」
* 「だーくふれいむますたー！」(指を指して)「あのころのきおくをけすにはどうやるです？」
* 「ばいなりでーたおいしいです」 [#core-yousei]_ 
* 「イエッス！アスミス！」
* 「ここはどこ？わたしはだあれ？」
* 「せんせい！そいんすうぶんかいがしたいです！」 [#core-yousei]_ [#saiten]_ 

.. figure:: ./illust/fairy.eps
   :alt: 働く妖精(?)さん
   :scale: 80%

   働く妖精(?)さん

.. [#core-yousei] どこぞの妖精さんをお借りしました。扱いにくいキャラクターですね。文章にするとかどくせいがひじょうにわるいです？
.. [#saiten] 同僚の@saiten氏に描いていただきました。妖精さんの画像を要請したらこんなイラストが上がってきました。イラスト技術が養成されたんじゃないでしょうか（ドヤァ

普段linuxを使っているけど、このコマンド知らなかった、こんな使い方ができるのか、という発見が一つでもあれば幸いです。
筆者がよく使うコマンドや Tips 、実行例も載せています。それでは、Coreutilsの世界へようこそ。


ご注意
------
Coreutilsのソースを読んで実装部分などの話はありません。コマンドの使い方を説明しています。
また、バージョンにより、使えないコマンドやオプションがあります。
なお、筆者が検証した環境は、さくらのVPS CentOS 5.7 と value-server [#vs]_ と amazon EC2 [#amazonec2]_ のマイクロインスタンスです。パッケージはほぼデフォルトのため、CentOS 5.7ではCoreutils 5.97、value-serverでは6系、amazon EC2では8.21です。
本文中ででてくるコマンドのサンプルは、上記の環境で実行していますが、使うときは誰にも迷惑をかけないところで実験・検証してください。

.. [#vs] 安価な共用サーバを使っていました。どういうハードウエア使ってるのかなーと思って申し込んでちょっと使っていました。もう解約してしまったので、Coreutilsの細かいバージョン忘れてしまいました
.. [#amazonec2] /etc/issue 曰く、 Amazon Linux AMI release 2014.03

この本では、Coreutilsのマニュアルの冗長な部分はできるだけ端折って、面白そうなところや、実践的な部分を取り上げました。
もし時間があるようであれば、Coreutilsのマニュアルを上から下まで読んでみてください [#coreutils-read]_ 。新たな発見があると思います。
また、文章の都合上、Coreutilsにないコマンドも載っています [#okonano]_ 。

本文中の「原文」はCoreutilsのマニュアルのことを指します。

.. [#okonano] 怒らないよね？おこなの？(やめろってば
.. [#coreutils-read] 正直なところ、かなり面倒です。あんまり面白くないです


そもそもCoreutilsとは
---------------------
「コアユーティルズ」と読みます。文字に落としてみるとダサいですね。
まあ、そのへんは置いといて、Coreutilsとは、 ``ls`` や ``cat`` など、linuxでは欠かせないコマンドをまとめたパッケージです [#coreutils-umu]_ 。
Coreutilsが登場する前は、Fileutils, Shellutils, Textutilsというutilsがありました。
それらを統合したものです。ChangeLogをみたところ、一番古い日付は2002-07-01でした。
おそらくそのころに統合されたのでしょう。メジャーバージョンは2003年4月にバージョン5として登場しました。
2014年12月現在、8.23 (2014-07-18) がリリースされています [#hinpan]_ 。

.. [#coreutils-umu] この本をお手にとっている人に、Coreutilsの説明をしてもあまり意味がないような気もしますが、まあ、一応
.. [#hinpan] 現在でも数日おきにバグフィックスなどが入っています

MacにもCoreutilsと同じく、``ls`` や ``cat`` などのコマンドがあります。こちらはBSD由来なので、GNU Coreutilsの実装と異なっています。
MacにGNU Coreutilsをインストールしたいときは、homebrewでインストールできます。

.. code-block:: sh 

   brew install coreutils


なお、既存のコマンドと名前がかぶるので、プレフィクスにgがついています。 ``ls`` だったら ``gls`` となっています。 ``od`` だった場合は・・・もうあとは分かるな・・・？



本稿の構成
----------
最初にCoreutilsパッケージのコマンドに共通のオプションを解説し、Coreutilsのマニュアルの通りにコマンドをならべて解説しています。一部、冗長なところがあるのでまとめたりしています。問題ないでしょう。

.. raw:: latex

   \end{abstract}
